(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define('barejs-sse-decoder',[],b):'object'==typeof exports?exports['barejs-sse-decoder']=b():a['barejs-sse-decoder']=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){'use strict';function d(a){return e.every(function(b,c){return a[c]===b})}Object.defineProperty(b,'__esModule',{value:!0});const e=['\xEF','\xBB','\xBF'],f='\n';class g{constructor(a){this.url=a,this.isFirst=!0,this.buf=void 0,this.discardTrailingNewline=!1,this.data='',this.eventName=''}decode(a){let b=[];this.buf=this.buf?this.buf+a:a,this.isFirst&&d(this.buf)&&(this.buf=this.buf.slice(e.length)),this.isFirst=!1;let g=0;for(;g<this.buf.length;){this.discardTrailingNewline&&(this.buf[g]===f&&++g,this.discardTrailingNewline=!1);let a=-1;var h=-1;for(let b=g;0>a&&b<this.buf.length;++b){const d=this.buf[b];d===':'?0>h&&(h=b-g):d==='\r'?(this.discardTrailingNewline=!0,a=b-g):d===f&&(a=b-g)}if(0>a)break;const c=this.parseEventStreamLine(this.buf,g,h,a);b=b.concat(c),g+=a+1}return g===this.buf.length?this.buf=void 0:0<g&&(this.buf=this.buf.slice(g)),b}parseEventStreamLine(a,b,c,d){const e=[];if(0===d)0<this.data.length&&(e.push({type:this.eventName||'message',data:this.data.slice(0,-1),lastEventId:this.lastEventId,origin:this.url}),this.data=''),this.eventName=null;else if(0<c){const e=0>c;let g=0;const h=a.slice(b,b+(e?d:c)).toString();g=e?d:a[b+c+1]===' '?c+2:c+1,b+=g;const i=d-g,j=a.slice(b,b+i).toString();if('data'===h)this.data+=j+'\n';else if('event'===h)this.eventName=j;else if('id'===h)this.lastEventId=j;else if('retry'===h){var f=parseInt(j,10);Number.isNaN(f)||(self.reconnectInterval=f)}}return e}}c.d(b,'SseDecoder',function(){return g})}])});
//# sourceMappingURL=index.js.map